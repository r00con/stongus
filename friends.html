<!DOCTYPE html>
<html>
<head>
<title>Friends</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Press Start 2P';
  background:
    linear-gradient(rgba(0,0,0,.8),rgba(0,0,0,.8)),
    url("background.png") center/cover fixed;
  color:white;
}
.box{
  max-width:420px;
  margin:40px auto;
  padding:20px;
  border:4px solid #333;
  background:rgba(0,0,0,.85);
}
</style>
</head>
<body>

<div class="box">
  <h2>Friends</h2>
  <div id="list"></div><br>
  <button onclick="back()">Back</button>
</div>

<script>
const me=localStorage.getItem("user");
async function load(){
  const data=await (await fetch(`/friends?me=${me}`)).json();
  const l=document.getElementById("list");
  l.innerHTML="";
  data.forEach(f=>{
    l.innerHTML+=`${f.name}<br>$${f.money}<br>${f.stocks.join(", ")||"No stocks"}<hr>`;
  });
}
function back(){location.href="gamepage.html";}
load();
setInterval(load,2000);
</script>
</body>
</html>
