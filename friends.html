<!DOCTYPE html>
<html>
<head>
<title>Friends</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Press Start 2P';
  background:
    linear-gradient(rgba(0,0,0,.75),rgba(0,0,0,.75)),
    url("background.png") center/cover no-repeat fixed;
  color:white;
}
.panel{
  max-width:500px;
  margin:40px auto;
  border:4px solid #333;
  padding:20px;
  background:rgba(0,0,0,.75);
}
</style>
</head>
<body>

<div class="panel">
  <h2>Friends</h2>
  <div id="list"></div>
  <br>
  <button onclick="back()">Back</button>
</div>

<script>
const me=localStorage.getItem("stongus_user");

async function load(){
  const data=await (await fetch(`/friends-data?me=${me}`)).json();
  const box=document.getElementById("list");
  box.innerHTML="";
  data.forEach(f=>{
    const d=document.createElement("div");
    d.innerHTML=`${f.name}<br>$${f.money}<br>${f.stocks.join(", ")||"No stocks"}<hr>`;
    box.appendChild(d);
  });
}
function back(){location.href="gamepage.html";}
setInterval(load,2000);
load();
</script>
</body>
</html>
