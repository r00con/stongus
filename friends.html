<!DOCTYPE html>
<html>
<head>
  <title>Friends</title>
</head>
<body>

<button onclick="goBack()">‚Üê Back</button>
<h1>Friends</h1>

<div id="list"></div>

<script src="/socket.io/socket.io.js"></script>
<script>
const me = localStorage.getItem("stongusUser");
if (!me) window.location.href = "/";

const socket = io();
socket.emit("join", me);

socket.on("players:update", (players) => {
  const list = document.getElementById("list");
  list.innerHTML = "";

  Object.keys(players).forEach(name => {
    if (name === me) return;

    const p = players[name];
    const stocks = p.stocks.length ? p.stocks.join(", ") : "None";

    list.innerHTML += `
      <h3>${name}</h3>
      <p>Money: $${p.money}</p>
      <p>Stocks: ${stocks}</p>
      <hr>
    `;
  });
});

function goBack() {
  window.location.href = "/game";
}
</script>

</body>
</html>
